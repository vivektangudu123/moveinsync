{"ast":null,"code":"import { parseStringPromise } from 'xml2js';\nexport const loginUser = async (mobileNumber, Role) => {\n  try {\n    const response = await fetch('http://localhost:5001/auth/send_otp', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        mobileNumber: mobileNumber,\n        // ensure this is a string\n        role: Role // ensure this is an integer\n      })\n    });\n    if (response.ok) {\n      const data = await response.text();\n      return data === \"pending\" ? \"pending\" : data;\n    } else {\n      console.log(`Request failed with status: ${response.status}`);\n      return \"error\";\n    }\n  } catch (error) {\n    console.error(\"Error:\", error);\n    throw error;\n  }\n};\nexport const Login_OTP = async (mobileNumber, otp) => {\n  try {\n    const response = await fetch(\"http://localhost:5001/auth/verify_otp\", {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      },\n      body: JSON.stringify({\n        mobileNumber: mobileNumber,\n        // ensure this is a string\n        otp: otp // ensure this is an integer\n      })\n    });\n    if (response.ok) {\n      const data = await response.text();\n      if (data === \"-1\") {\n        return false;\n      } else {\n        localStorage.setItem(\"JWT\", data);\n        return true;\n      }\n    } else {\n      console.log(\"Request failed with status:\", response.status);\n      return \"error\";\n    }\n  } catch (error) {\n    console.error(\"Error:\", error);\n    throw error;\n  }\n};\n_c = Login_OTP;\nexport const getUserBookings = async () => {\n  const token = localStorage.getItem('JWT');\n  const response = await fetch(\"http://localhost:5001/users/bookings\", {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      jwt: token\n    })\n  });\n  const text = await response.text();\n  const result = await parseStringPromise(text, {\n    explicitArray: false\n  });\n  const bookings = result.List.item ? Array.isArray(result.List.item) ? result.List.item : [result.List.item] : []; // Ensure bookings is an array\n\n  return bookings;\n};\nexport const cancelBooking = async bookingId => {\n  const token = localStorage.getItem('JWT');\n  const response = await fetch(\"http://localhost:5001/user/cancel-booking\", {\n    body: JSON.stringify({\n      BookingID: bookingId,\n      jwt: token\n    })\n  });\n  return response;\n};\nvar _c;\n$RefreshReg$(_c, \"Login_OTP\");","map":{"version":3,"names":["parseStringPromise","loginUser","mobileNumber","Role","response","fetch","method","headers","body","JSON","stringify","role","ok","data","text","console","log","status","error","Login_OTP","otp","localStorage","setItem","_c","getUserBookings","token","getItem","jwt","result","explicitArray","bookings","List","item","Array","isArray","cancelBooking","bookingId","BookingID","$RefreshReg$"],"sources":["/Users/vivek/Desktop/movein/shuttle_ride/src/apicalls/user.js"],"sourcesContent":["import { parseStringPromise } from 'xml2js';\nexport const loginUser = async (mobileNumber, Role) => {\n    try {\n        const response = await fetch('http://localhost:5001/auth/send_otp', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                mobileNumber: mobileNumber, // ensure this is a string\n                role: Role                   // ensure this is an integer\n            })\n        });\n\n        if (response.ok) {\n            const data = await response.text();\n            return data === \"pending\" ? \"pending\" : data;\n        } else {\n            console.log(`Request failed with status: ${response.status}`);\n            return \"error\";\n        }\n    } catch (error) {\n        console.error(\"Error:\", error);\n        throw error;\n    }\n};\n\nexport const Login_OTP = async (mobileNumber, otp) => {\n    try {\n        const response = await fetch(\"http://localhost:5001/auth/verify_otp\", {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'Access-Control-Allow-Origin': '*'\n            },\n            body: JSON.stringify({\n                mobileNumber: mobileNumber, // ensure this is a string\n                otp: otp                   // ensure this is an integer\n            })\n        });\n        if (response.ok) {\n            const data = await response.text();\n            if (data === \"-1\") {\n                return false;\n            } else {\n                localStorage.setItem(\"JWT\", data);\n                return true;\n            }\n        }else {\n            console.log(\"Request failed with status:\", response.status);\n            return \"error\";\n        }\n    } catch (error) {\n        console.error(\"Error:\", error);\n        throw error;\n    }\n\n}\nexport const getUserBookings = async () => {\n    const token = localStorage.getItem('JWT');\n    const response = await fetch(\"http://localhost:5001/users/bookings\", {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n          },\n        body: JSON.stringify({\n            jwt:token\n           })\n    });\n    const text = await response.text();\n    const result = await parseStringPromise(text, { explicitArray: false });\n    const bookings = result.List.item ? \n    Array.isArray(result.List.item) ? result.List.item : [result.List.item]\n    : []; // Ensure bookings is an array\n\nreturn bookings;\n};\nexport const cancelBooking = async (bookingId) => {\n    const token = localStorage.getItem('JWT');\n    const response = await fetch(\"http://localhost:5001/user/cancel-booking\", {\n        body: JSON.stringify({\n            BookingID:bookingId,\n            jwt:token\n           })\n    });\n    return response;\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var _jsxFileName = \"/Users/vivek/Desktop/movein/shuttle_ride/src/pages/home.jsx\",\n  _s = $RefreshSig$();\n// import React, { useState, useEffect } from \"react\";\n// import { useNavigate } from \"react-router-dom\";\n// import \"./HomePage.css\";\n// import { verify_jwt } from \"../apicalls/axiosInstance\";\n// import { search_busses } from \"../apicalls/user\";\n// function HomePage() {\n//   const [sourceLatitude, setSourceLatitude] = useState(\"\");\n//   const [sourceLongitude, setSourceLongitude] = useState(\"\");\n//   const [destinationLatitude, setDestinationLatitude] = useState(\"\");\n//   const [destinationLongitude, setDestinationLongitude] = useState(\"\");\n//   const [buses, setBuses] = useState([]);\n//   const navigate = useNavigate();\n\n//   useEffect(() => {\n//     const token = localStorage.getItem('JWT');\n\n//     // Only proceed if token exists\n//     if (token) {\n//       const verifyToken = async () => {\n//         try {\n//           const response = await verify_jwt(token); // Call verify_jwt only once\n\n//           if (response === \"-1\" || response === \"-2\") {\n//             console.log(\"Invalid token, redirecting to login\");\n//             navigate(\"/login\");\n//           }\n//         } catch (error) {\n//           console.error(\"Error verifying JWT:\", error);\n//           navigate(\"/login\"); \n//         }\n//       };\n\n//       verifyToken(); \n//     } else {\n\n//       navigate(\"/login\");\n//     }\n//   }, [navigate]);  \n\n//   const handleSearch = (e) => {\n//     e.preventDefault();\n\n//     if (\n//       sourceLatitude === \"\" ||\n//       sourceLongitude === \"\" ||\n//       destinationLatitude === \"\" ||\n//       destinationLongitude === \"\"\n//     ) {\n//       alert(\"Please fill in both source and destination coordinates.\");\n//       return;\n//     }\n\n//     // Additional validation: Check latitude and longitude ranges\n//     if (\n//       sourceLatitude < -1 || sourceLatitude > 20 ||\n//       destinationLatitude < -1 || destinationLatitude > 20 ||\n//       sourceLongitude < -1 || sourceLongitude > 20 ||\n//       destinationLongitude < -1 || destinationLongitude > 20\n//     ) {\n//       alert(\"Invalid latitude or longitude values. Please enter valid coordinates.\");\n//       return;\n//     }\n\n//     useEffect(() => {\n//       const fetchBuses = async () => {\n//           try {\n//               const busData = await search_busses(sourceLatitude, sourceLongitude, destinationLatitude, destinationLongitude);\n//               console.log(busData); // Check the structure of the bus data\n//               setBuses(busData); // Set the fetched bus data to state\n//           } catch (err) {\n//               console.error('Error fetching buses:', err);\n//           } finally {\n//           }\n//       };\n\n//       fetchBuses();\n//   }, [sourceLatitude, sourceLongitude, destinationLatitude, destinationLongitude]);\n//   };\n\n//   const handleManageBookings = () => {\n//     navigate(\"/manage-bookings\");\n//   };\n//   const viewSeatPlan = (busId) => {\n//     navigate(`/seat-plan/${busId}`); // Assuming you have a route for seat plan details\n//   };\n//   const handleLogout = () => {\n//     localStorage.removeItem('JWT');  // Clear token on logout\n//     navigate(\"/login\");\n//   };\n\n//   return (\n\n//       <div className=\"homepage-container\">\n//         <div className=\"top-buttons\">\n//           <button onClick={handleManageBookings} className=\"top-btn\">\n//             Manage Bookings\n//           </button>\n//           <button onClick={handleLogout} className=\"top-btn\">\n//             Logout\n//           </button>\n//         </div>\n\n//         <div className=\"search-container\">\n//           <h1>Bus Search</h1>\n//           <form onSubmit={handleSearch} className=\"horizontal-form\">\n//             <div className=\"coordinate-input\">\n//               <label>Source Latitude</label>\n//               <input\n//                 type=\"number\"\n//                 value={sourceLatitude}\n//                 onChange={(e) => setSourceLatitude(e.target.value)}\n//                 placeholder=\"Source Latitude\"\n//                 required\n//               />\n//             </div>\n//             <div className=\"coordinate-input\">\n//               <label>Source Longitude</label>\n//               <input\n//                 type=\"number\"\n//                 value={sourceLongitude}\n//                 onChange={(e) => setSourceLongitude(e.target.value)}\n//                 placeholder=\"Source Longitude\"\n//                 required\n//               />\n//             </div>\n//             <div className=\"coordinate-input\">\n//               <label>Destination Latitude</label>\n//               <input\n//                 type=\"number\"\n//                 value={destinationLatitude}\n//                 onChange={(e) => setDestinationLatitude(e.target.value)}\n//                 placeholder=\"Destination Latitude\"\n//                 required\n//               />\n//             </div>\n//             <div className=\"coordinate-input\">\n//               <label>Destination Longitude</label>\n//               <input\n//                 type=\"number\"\n//                 value={destinationLongitude}\n//                 onChange={(e) => setDestinationLongitude(e.target.value)}\n//                 placeholder=\"Destination Longitude\"\n//                 required\n//               />\n//             </div>\n//             <button type=\"submit\" className=\"search-btn\">\n//               Search Buses\n//             </button>\n//           </form>\n\n//           <div className=\"bus-list\">\n//                 {buses.map((bus) => (\n//                     <div key={bus.busId} className={`bus-item ${bus.live ? 'live' : 'not-live'}`} style={{ backgroundColor: bus.live ? 'lightgreen' : 'lightcoral' }}>\n//                         <h3>{bus.busName} (ID: {bus.busId})</h3>\n//                         <p>Total Seats: {bus.totalSeats}</p>\n//                         <p>Current Occupancy: {bus.currentOccupancy}</p>\n//                         {/* <button onClick={() => viewSeatPlan(bus.busId)}>View Seat Plan</button> */}\n//                         {/* <div className=\"seat-plan\">\n//                             {bus.seatPlan.map(seat => (\n//                                 <div key={seat.seatNumber} style={{ backgroundColor: seat.isAvailable ? 'lightgreen' : 'lightcoral' }}>\n//                                     {seat.seatNumber}: {seat.isAvailable ? 'Available' : 'Booked'}\n//                                 </div>\n//                             ))}\n//                         </div> */}\n//                     </div>\n//                 ))}\n//             </div>\n//         </div>\n//       </div>\n//     );    \n// }\n\n// export default HomePage;\nimport \"./HomePage.css\";\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom'; // Ensure you have this import\nimport { search_busses } from '../apicalls/user'; // Adjust the import as necessary\nimport { verify_jwt } from \"../apicalls/axiosInstance\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst HomePage = () => {\n  _s();\n  const navigate = useNavigate();\n  const [buses, setBuses] = useState([]);\n  const [sourceLatitude, setSourceLatitude] = useState(\"\");\n  const [sourceLongitude, setSourceLongitude] = useState(\"\");\n  const [destinationLatitude, setDestinationLatitude] = useState(\"\");\n  const [destinationLongitude, setDestinationLongitude] = useState(\"\");\n  const handleManageBookings = () => {\n    navigate(\"/manage-bookings\");\n  };\n  const viewSeatPlan = busId => {\n    navigate(`/seat-plan/${busId}`); // Assuming you have a route for seat plan details\n  };\n  const handleLogout = () => {\n    localStorage.removeItem('JWT'); // Clear token on logout\n    navigate(\"/login\");\n  };\n  useEffect(() => {\n    const token = localStorage.getItem('JWT');\n\n    // Only proceed if token exists\n    if (token) {\n      const verifyToken = async () => {\n        try {\n          const response = await verify_jwt(token); // Call verify_jwt only once\n\n          if (response === \"-1\" || response === \"-2\") {\n            console.log(\"Invalid token, redirecting to login\");\n            navigate(\"/login\");\n          }\n        } catch (error) {\n          console.error(\"Error verifying JWT:\", error);\n          navigate(\"/login\");\n        }\n      };\n      verifyToken();\n    } else {\n      navigate(\"/login\");\n    }\n  }, [navigate]);\n  const handleSearch = async e => {\n    e.preventDefault();\n    if (sourceLatitude === \"\" || sourceLongitude === \"\" || destinationLatitude === \"\" || destinationLongitude === \"\") {\n      alert(\"Please fill in both source and destination coordinates.\");\n      return;\n    }\n\n    // Additional validation: Check latitude and longitude ranges\n    if (sourceLatitude < -1 || sourceLatitude > 20 || destinationLatitude < -1 || destinationLatitude > 20 || sourceLongitude < -1 || sourceLongitude > 20 || destinationLongitude < -1 || destinationLongitude > 20) {\n      alert(\"Invalid latitude or longitude values. Please enter valid coordinates.\");\n      return;\n    }\n\n    // Fetch buses here\n    try {\n      const busData = await search_busses(sourceLatitude, sourceLongitude, destinationLatitude, destinationLongitude);\n      console.log(busData); // Check the structure of the bus data\n      setBuses(busData); // Set the fetched bus data to state\n    } catch (err) {\n      console.error('Error fetching buses:', err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"homepage-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"top-buttons\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleManageBookings,\n        className: \"top-btn\",\n        children: \"Manage Bookings\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLogout,\n        className: \"top-btn\",\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Bus Search\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSearch,\n        className: \"horizontal-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"coordinate-input\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Source Latitude\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            value: sourceLatitude,\n            onChange: e => setSourceLatitude(e.target.value),\n            placeholder: \"Source Latitude\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"coordinate-input\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Source Longitude\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            value: sourceLongitude,\n            onChange: e => setSourceLongitude(e.target.value),\n            placeholder: \"Source Longitude\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"coordinate-input\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Destination Latitude\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            value: destinationLatitude,\n            onChange: e => setDestinationLatitude(e.target.value),\n            placeholder: \"Destination Latitude\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"coordinate-input\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Destination Longitude\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            value: destinationLongitude,\n            onChange: e => setDestinationLongitude(e.target.value),\n            placeholder: \"Destination Longitude\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"search-btn\",\n          children: \"Search Buses\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bus-list\",\n      children: buses.map(bus => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `bus-item ${bus.live ? 'live' : 'not-live'}`,\n        style: {\n          backgroundColor: bus.color\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [bus.busName, \" (ID: \", bus.busId, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Total Seats: \", bus.totalSeats]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Current Occupancy: \", bus.currentOccupancy]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Current color: \", bus.color]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"live-status\",\n          style: {\n            color: bus.live ? 'white' : 'blue'\n          },\n          children: bus.live ? 'Live' : 'Not Live'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"view-seat-plan-btn\",\n          onClick: () => viewSeatPlan(bus.busId),\n          children: \"View Seat Plan\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 13\n        }, this)]\n      }, bus.busId, true, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 9\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 257,\n    columnNumber: 7\n  }, this);\n};\n_s(HomePage, \"VavS2tdBRzQ3+bCz52nRTbzSniQ=\", false, function () {\n  return [useNavigate];\n});\n_c = HomePage;\nexport default HomePage;\nvar _c;\n$RefreshReg$(_c, \"HomePage\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","search_busses","verify_jwt","jsxDEV","_jsxDEV","HomePage","_s","navigate","buses","setBuses","sourceLatitude","setSourceLatitude","sourceLongitude","setSourceLongitude","destinationLatitude","setDestinationLatitude","destinationLongitude","setDestinationLongitude","handleManageBookings","viewSeatPlan","busId","handleLogout","localStorage","removeItem","token","getItem","verifyToken","response","console","log","error","handleSearch","e","preventDefault","alert","busData","err","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","value","onChange","target","placeholder","required","map","bus","live","style","backgroundColor","color","busName","totalSeats","currentOccupancy","_c","$RefreshReg$"],"sources":["/Users/vivek/Desktop/movein/shuttle_ride/src/pages/home.jsx"],"sourcesContent":["// import React, { useState, useEffect } from \"react\";\n// import { useNavigate } from \"react-router-dom\";\n// import \"./HomePage.css\";\n// import { verify_jwt } from \"../apicalls/axiosInstance\";\n// import { search_busses } from \"../apicalls/user\";\n// function HomePage() {\n//   const [sourceLatitude, setSourceLatitude] = useState(\"\");\n//   const [sourceLongitude, setSourceLongitude] = useState(\"\");\n//   const [destinationLatitude, setDestinationLatitude] = useState(\"\");\n//   const [destinationLongitude, setDestinationLongitude] = useState(\"\");\n//   const [buses, setBuses] = useState([]);\n//   const navigate = useNavigate();\n\n//   useEffect(() => {\n//     const token = localStorage.getItem('JWT');\n\n//     // Only proceed if token exists\n//     if (token) {\n//       const verifyToken = async () => {\n//         try {\n//           const response = await verify_jwt(token); // Call verify_jwt only once\n        \n//           if (response === \"-1\" || response === \"-2\") {\n//             console.log(\"Invalid token, redirecting to login\");\n//             navigate(\"/login\");\n//           }\n//         } catch (error) {\n//           console.error(\"Error verifying JWT:\", error);\n//           navigate(\"/login\"); \n//         }\n//       };\n\n//       verifyToken(); \n//     } else {\n      \n//       navigate(\"/login\");\n//     }\n//   }, [navigate]);  \n\n//   const handleSearch = (e) => {\n//     e.preventDefault();\n\n//     if (\n//       sourceLatitude === \"\" ||\n//       sourceLongitude === \"\" ||\n//       destinationLatitude === \"\" ||\n//       destinationLongitude === \"\"\n//     ) {\n//       alert(\"Please fill in both source and destination coordinates.\");\n//       return;\n//     }\n\n//     // Additional validation: Check latitude and longitude ranges\n//     if (\n//       sourceLatitude < -1 || sourceLatitude > 20 ||\n//       destinationLatitude < -1 || destinationLatitude > 20 ||\n//       sourceLongitude < -1 || sourceLongitude > 20 ||\n//       destinationLongitude < -1 || destinationLongitude > 20\n//     ) {\n//       alert(\"Invalid latitude or longitude values. Please enter valid coordinates.\");\n//       return;\n//     }\n\n//     useEffect(() => {\n//       const fetchBuses = async () => {\n//           try {\n//               const busData = await search_busses(sourceLatitude, sourceLongitude, destinationLatitude, destinationLongitude);\n//               console.log(busData); // Check the structure of the bus data\n//               setBuses(busData); // Set the fetched bus data to state\n//           } catch (err) {\n//               console.error('Error fetching buses:', err);\n//           } finally {\n//           }\n//       };\n\n//       fetchBuses();\n//   }, [sourceLatitude, sourceLongitude, destinationLatitude, destinationLongitude]);\n//   };\n\n//   const handleManageBookings = () => {\n//     navigate(\"/manage-bookings\");\n//   };\n//   const viewSeatPlan = (busId) => {\n//     navigate(`/seat-plan/${busId}`); // Assuming you have a route for seat plan details\n//   };\n//   const handleLogout = () => {\n//     localStorage.removeItem('JWT');  // Clear token on logout\n//     navigate(\"/login\");\n//   };\n\n//   return (\n\n//       <div className=\"homepage-container\">\n//         <div className=\"top-buttons\">\n//           <button onClick={handleManageBookings} className=\"top-btn\">\n//             Manage Bookings\n//           </button>\n//           <button onClick={handleLogout} className=\"top-btn\">\n//             Logout\n//           </button>\n//         </div>\n    \n//         <div className=\"search-container\">\n//           <h1>Bus Search</h1>\n//           <form onSubmit={handleSearch} className=\"horizontal-form\">\n//             <div className=\"coordinate-input\">\n//               <label>Source Latitude</label>\n//               <input\n//                 type=\"number\"\n//                 value={sourceLatitude}\n//                 onChange={(e) => setSourceLatitude(e.target.value)}\n//                 placeholder=\"Source Latitude\"\n//                 required\n//               />\n//             </div>\n//             <div className=\"coordinate-input\">\n//               <label>Source Longitude</label>\n//               <input\n//                 type=\"number\"\n//                 value={sourceLongitude}\n//                 onChange={(e) => setSourceLongitude(e.target.value)}\n//                 placeholder=\"Source Longitude\"\n//                 required\n//               />\n//             </div>\n//             <div className=\"coordinate-input\">\n//               <label>Destination Latitude</label>\n//               <input\n//                 type=\"number\"\n//                 value={destinationLatitude}\n//                 onChange={(e) => setDestinationLatitude(e.target.value)}\n//                 placeholder=\"Destination Latitude\"\n//                 required\n//               />\n//             </div>\n//             <div className=\"coordinate-input\">\n//               <label>Destination Longitude</label>\n//               <input\n//                 type=\"number\"\n//                 value={destinationLongitude}\n//                 onChange={(e) => setDestinationLongitude(e.target.value)}\n//                 placeholder=\"Destination Longitude\"\n//                 required\n//               />\n//             </div>\n//             <button type=\"submit\" className=\"search-btn\">\n//               Search Buses\n//             </button>\n//           </form>\n    \n//           <div className=\"bus-list\">\n//                 {buses.map((bus) => (\n//                     <div key={bus.busId} className={`bus-item ${bus.live ? 'live' : 'not-live'}`} style={{ backgroundColor: bus.live ? 'lightgreen' : 'lightcoral' }}>\n//                         <h3>{bus.busName} (ID: {bus.busId})</h3>\n//                         <p>Total Seats: {bus.totalSeats}</p>\n//                         <p>Current Occupancy: {bus.currentOccupancy}</p>\n//                         {/* <button onClick={() => viewSeatPlan(bus.busId)}>View Seat Plan</button> */}\n//                         {/* <div className=\"seat-plan\">\n//                             {bus.seatPlan.map(seat => (\n//                                 <div key={seat.seatNumber} style={{ backgroundColor: seat.isAvailable ? 'lightgreen' : 'lightcoral' }}>\n//                                     {seat.seatNumber}: {seat.isAvailable ? 'Available' : 'Booked'}\n//                                 </div>\n//                             ))}\n//                         </div> */}\n//                     </div>\n//                 ))}\n//             </div>\n//         </div>\n//       </div>\n//     );    \n// }\n\n// export default HomePage;\nimport \"./HomePage.css\";\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom'; // Ensure you have this import\nimport { search_busses } from '../apicalls/user'; // Adjust the import as necessary\nimport { verify_jwt } from \"../apicalls/axiosInstance\";\nconst HomePage = () => {\n    const navigate = useNavigate();\n    const [buses, setBuses] = useState([]);\n    const [sourceLatitude, setSourceLatitude] = useState(\"\");\n    const [sourceLongitude, setSourceLongitude] = useState(\"\");\n    const [destinationLatitude, setDestinationLatitude] = useState(\"\");\n    const [destinationLongitude, setDestinationLongitude] = useState(\"\");\n  const handleManageBookings = () => {\n    navigate(\"/manage-bookings\");\n  };\n  const viewSeatPlan = (busId) => {\n    navigate(`/seat-plan/${busId}`); // Assuming you have a route for seat plan details\n  };\n  const handleLogout = () => {\n    localStorage.removeItem('JWT');  // Clear token on logout\n    navigate(\"/login\");\n  };\n    useEffect(() => {\n        const token = localStorage.getItem('JWT');\n\n        // Only proceed if token exists\n        if (token) {\n            const verifyToken = async () => {\n                try {\n                    const response = await verify_jwt(token); // Call verify_jwt only once\n\n                    if (response === \"-1\" || response === \"-2\") {\n                        console.log(\"Invalid token, redirecting to login\");\n                        navigate(\"/login\");\n                    }\n                } catch (error) {\n                    console.error(\"Error verifying JWT:\", error);\n                    navigate(\"/login\");\n                }\n            };\n\n            verifyToken();\n        } else {\n            navigate(\"/login\");\n        }\n    }, [navigate]);\n\n    const handleSearch = async (e) => {\n        e.preventDefault();\n\n        if (\n            sourceLatitude === \"\" ||\n            sourceLongitude === \"\" ||\n            destinationLatitude === \"\" ||\n            destinationLongitude === \"\"\n        ) {\n            alert(\"Please fill in both source and destination coordinates.\");\n            return;\n        }\n\n        // Additional validation: Check latitude and longitude ranges\n        if (\n            sourceLatitude < -1 || sourceLatitude > 20 ||\n            destinationLatitude < -1 || destinationLatitude > 20 ||\n            sourceLongitude < -1 || sourceLongitude > 20 ||\n            destinationLongitude < -1 || destinationLongitude > 20\n        ) {\n            alert(\"Invalid latitude or longitude values. Please enter valid coordinates.\");\n            return;\n        }\n\n        // Fetch buses here\n        try {\n            const busData = await search_busses(sourceLatitude, sourceLongitude, destinationLatitude, destinationLongitude);\n            console.log(busData); // Check the structure of the bus data\n            setBuses(busData); // Set the fetched bus data to state\n        } catch (err) {\n            console.error('Error fetching buses:', err);\n        }\n    };\n\n    return (\n\n      <div className=\"homepage-container\">\n        <div className=\"top-buttons\">\n          <button onClick={handleManageBookings} className=\"top-btn\">\n            Manage Bookings\n          </button>\n          <button onClick={handleLogout} className=\"top-btn\">\n            Logout\n          </button>\n        </div>\n    \n        <div className=\"search-container\">\n          <h1>Bus Search</h1>\n          <form onSubmit={handleSearch} className=\"horizontal-form\">\n            <div className=\"coordinate-input\">\n              <label>Source Latitude</label>\n              <input\n                type=\"number\"\n                value={sourceLatitude}\n                onChange={(e) => setSourceLatitude(e.target.value)}\n                placeholder=\"Source Latitude\"\n                required\n              />\n            </div>\n            <div className=\"coordinate-input\">\n              <label>Source Longitude</label>\n              <input\n                type=\"number\"\n                value={sourceLongitude}\n                onChange={(e) => setSourceLongitude(e.target.value)}\n                placeholder=\"Source Longitude\"\n                required\n              />\n            </div>\n            <div className=\"coordinate-input\">\n              <label>Destination Latitude</label>\n              <input\n                type=\"number\"\n                value={destinationLatitude}\n                onChange={(e) => setDestinationLatitude(e.target.value)}\n                placeholder=\"Destination Latitude\"\n                required\n              />\n            </div>\n            <div className=\"coordinate-input\">\n              <label>Destination Longitude</label>\n              <input\n                type=\"number\"\n                value={destinationLongitude}\n                onChange={(e) => setDestinationLongitude(e.target.value)}\n                placeholder=\"Destination Longitude\"\n                required\n              />\n            </div>\n            <button type=\"submit\" className=\"search-btn\">\n              Search Buses\n            </button>\n          </form>\n    \n\n            </div>\n            \n     \n            <div className=\"bus-list\">\n    {buses.map((bus) => (\n        <div\n            key={bus.busId}\n            className={`bus-item ${bus.live ? 'live' : 'not-live'}`}\n            style={{ backgroundColor: bus.color }}\n                                                      >\n            <h3>{bus.busName} (ID: {bus.busId})</h3>\n            <p>Total Seats: {bus.totalSeats}</p>\n            <p>Current Occupancy: {bus.currentOccupancy}</p>\n            <p>Current color: {bus.color}</p>\n            <p className=\"live-status\" style={{ color: bus.live ? 'white' : 'blue' }}>\n                {bus.live ? 'Live' : 'Not Live'}\n        </p>\n            <button className=\"view-seat-plan-btn\" onClick={() => viewSeatPlan(bus.busId)}>View Seat Plan</button>\n            </div>\n          ))}\n      </div>\n        </div>\n    );\n};\n\nexport default HomePage;\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,OAAO,gBAAgB;AACvB,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,WAAW,QAAQ,kBAAkB,CAAC,CAAC;AAChD,SAASC,aAAa,QAAQ,kBAAkB,CAAC,CAAC;AAClD,SAASC,UAAU,QAAQ,2BAA2B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AACvD,MAAMC,QAAQ,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACnB,MAAMC,QAAQ,GAAGP,WAAW,CAAC,CAAC;EAC9B,MAAM,CAACQ,KAAK,EAAEC,QAAQ,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACW,cAAc,EAAEC,iBAAiB,CAAC,GAAGZ,QAAQ,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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}